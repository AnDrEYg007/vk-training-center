# Утилиты для работы с VK: `utils.py`

**Ключевой файл:** `backend_python/services/vk_api/utils.py.txt`

Этот модуль содержит вспомогательные функции для работы с различными форматами идентификаторов и ссылок ВКонтакте, приводя их к единому стандарту.

---

## 1. Основные функции

### `resolve_vk_group_id(vk_project_id, user_token)`
-   **Назначение:** Получить **числовой ID** сообщества, вне зависимости от того, в каком формате он был передан.
-   **Логика:**
    1.  Принимает строку (например, из поля `vkProjectId` в нашей БД).
    2.  Очищает ее от мусора (`https://vk.com/`, `@`, `club`, `public`).
    3.  Если результат — число, возвращает его.
    4.  Если результат — строка (короткое имя, `screen_name`), вызывает `resolve_screen_name` для получения числового ID.
-   **Пример:** `'club123'`, `'https://vk.com/durov'`, `'durov'` -> все будет преобразовано в соответствующий числовой ID.

### `extract_vk_group_identifier(input_str)`
-   **Назначение:** Извлечь "чистый" идентификатор (число или `screen_name`) из любой строки, содержащей ссылку на VK.
-   **Пример:** `'<a href="https://vk.com/durov?w=wall-1_2345">Link</a>'` -> `'durov'`.

### `resolve_screen_name(screen_name, user_token)`
-   **Назначение:** Преобразовать короткое имя (`screen_name`) в числовой ID.
-   **Логика:** Вызывает метод `utils.resolveScreenName` VK API.
-   **Возвращает:** Объект `{ "object_id": ..., "type": "group" }` или пустой объект, если имя не найдено.

### `vk_owner_id_string(group_id)`
-   **Назначение:** Сформировать `owner_id` для API-запросов, который для сообществ всегда должен быть отрицательным.
-   **Пример:** `12345` -> `'-12345'`.
