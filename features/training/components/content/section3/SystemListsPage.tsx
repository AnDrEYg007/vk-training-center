import React from 'react';
import { NavigationLink, NavigationButtons } from '../shared';

export const SystemListsPage: React.FC = () => {
    return (
        <div className="prose max-w-none">
            <h1>3.2. Системные списки</h1>

            <p className="text-lg">
                Системные списки — это готовые подборки данных, которые собираются автоматически из активности пользователей в сообществе. В отличие от <strong>пользовательских списков</strong>, где вы сами решаете, кого добавить, системные списки наполняются сами: 12 типов на выбор, от подписчиков сообщества до участников опросов.
            </p>

            {/* ===================================================================== */}
            {/* 3.2.1. ТИПЫ СИСТЕМНЫХ СПИСКОВ */}
            {/* ===================================================================== */}
            <section>
                <h2 id="3-2-1-types">3.2.1. Типы системных списков</h2>
                
                <p>
                    В системе доступно <strong>12 типов списков</strong>, которые автоматически собираются из различных источников: подписчики сообщества, пользователи с активностями (лайки, комментарии, репосты), участники автоматизаций и другие категории.
                </p>

                <p>
                    Каждый тип списка имеет свои особенности сбора данных — от мгновенной загрузки подписчиков через API до последовательного перебора активностей по постам.
                </p>

                <div className="not-prose my-6">
                    <NavigationLink to="3-2-1-types" title="Подробнее о типах системных списков →" variant="primary" />
                </div>
            </section>

            {/* ===================================================================== */}
            {/* 3.2.2. КАРТОЧКА СПИСКА */}
            {/* ===================================================================== */}
            <section>
                <h2 id="3-2-2-list-card">3.2.2. Карточка списка</h2>

                <p>
                    Каждый список отображается в виде карточки с иконкой, названием, описанием и счётчиком участников. Карточки визуально различаются по типу: подписчики (синий фон), активности (розовый, красный, оранжевый), автоматизации (янтарный) и другие категории.
                </p>

                <p>
                    Карточка реагирует на наведение и клик, имеет состояния «активная» и «обновляется», а также поддерживает навигацию по группам для быстрого доступа ко всем 12 типам списков.
                </p>

                <div className="not-prose my-6">
                    <NavigationLink to="3-2-2-list-card" title="Подробнее об анатомии карточки списка →" variant="primary" />
                </div>
            </section>

            {/* ===================================================================== */}
            {/* 3.2.3. ПРОСМОТР УЧАСТНИКОВ */}
            {/* ===================================================================== */}
            <section>
                <h2 id="3-2-3-members">3.2.3. Просмотр участников</h2>

                <p>
                    При клике на карточку списка открывается таблица с детальной информацией об участниках: аватар, имя, демографические данные (пол, возраст, город), онлайн-статус, платформа доступа и источник добавления в список.
                </p>

                <p>
                    Каждый участник помечается цветными бейджами для быстрой идентификации статуса аккаунта (активен, удалён, заблокирован), платформы (iOS, Android, Web) и источника (Callback API, диалог, синхронизация постов).
                </p>

                <div className="not-prose my-6">
                    <NavigationLink to="3-2-3-members" title="Подробнее о просмотре участников →" variant="primary" />
                </div>
            </section>

            {/* ===================================================================== */}
            {/* 3.2.4. ПРОСМОТР ПОСТОВ */}
            {/* ===================================================================== */}
            <section>
                <h2 id="3-2-4-posts">3.2.4. Просмотр постов</h2>

                <p>
                    Для списков активностей (лайки, комментарии, репосты) доступен отдельный режим просмотра постов, по которым собиралась активность. Таблица показывает превью медиа, текст поста, метрики (лайки, комментарии, репосты, просмотры) и даты публикации.
                </p>

                <p>
                    Система автоматически собирает статистику и обновляет её при синхронизации. Лайки, поставленные от имени вашего сообщества, выделяются красным цветом для быстрой идентификации.
                </p>

                <div className="not-prose my-6">
                    <NavigationLink to="3-2-4-posts" title="Подробнее о просмотре постов →" variant="primary" />
                </div>
            </section>

            {/* ===================================================================== */}
            {/* 3.2.5. ПРОСМОТР ВЗАИМОДЕЙСТВИЙ */}
            {/* ===================================================================== */}
            <section>
                <h2 id="3-2-5-interactions">3.2.5. Просмотр взаимодействий</h2>

                <p>
                    Режим взаимодействий объединяет данные о пользователях и постах, с которыми они взаимодействовали. Это самый подробный режим просмотра: вы видите не только список людей, но и историю их активности с возможностью детального анализа.
                </p>

                <p>
                    Таблица показывает <strong>кто, как часто и с какими постами</strong> взаимодействовал за выбранный период. Каждая строка раскрывается, показывая полный список постов с метриками и бейджами статусов.
                </p>

                <div className="not-prose my-6">
                    <NavigationLink to="3-2-5-interactions" title="Подробнее о просмотре взаимодействий →" variant="primary" />
                </div>
            </section>

            {/* ===================================================================== */}
            {/* 3.2.6. СИНХРОНИЗАЦИЯ ВЗАИМОДЕЙСТВИЙ */}
            {/* ===================================================================== */}
            <section>
                <h2 id="3-2-6-sync-interactions">3.2.6. Синхронизация взаимодействий</h2>

                <p>
                    Системные списки — это не статичная выгрузка, а живая база данных. Система автоматически следит за изменениями и обновляет информацию по расписанию или по запросу.
                </p>

                <h3 className="!text-lg !font-semibold !text-gray-800 !mt-6 !mb-3">Как работает синхронизация</h3>

                <p>Процесс обновления списка делится на несколько этапов:</p>

                <ol>
                    <li><strong>Запуск задачи</strong> — вы нажимаете кнопку «Обновить» на карточке списка (или система запускает автообновление)</li>
                    <li><strong>Сбор данных</strong> — сервер делает запросы в VK API, перебирая всех участников или активности</li>
                    <li><strong>Обработка</strong> — данные сохраняются в базу, старые записи обновляются, новые добавляются</li>
                    <li><strong>Завершение</strong> — карточка списка показывает обновлённое количество участников и дату последней синхронизации</li>
                </ol>

                <div className="bg-white border-2 border-gray-300 rounded-lg p-6 my-6">
                    <h4 className="text-sm font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <svg className="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                        </svg>
                        Индикаторы процесса
                    </h4>
                    
                    <div className="space-y-3">
                        <div className="flex items-start gap-3">
                            <div className="flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-600 text-xs font-bold flex-shrink-0 mt-0.5">1</div>
                            <div>
                                <p className="text-sm font-medium text-gray-800 mb-1">Ожидание запуска</p>
                                <p className="text-xs text-gray-600">Задача добавлена в очередь, ждёт своей очереди на выполнение</p>
                            </div>
                        </div>
                        
                        <div className="flex items-start gap-3">
                            <div className="flex items-center justify-center w-6 h-6 rounded-full bg-yellow-100 text-yellow-600 text-xs font-bold flex-shrink-0 mt-0.5">2</div>
                            <div>
                                <p className="text-sm font-medium text-gray-800 mb-1">Синхронизация</p>
                                <p className="text-xs text-gray-600">Сервер собирает данные из ВК, карточка показывает вращающийся индикатор</p>
                            </div>
                        </div>
                        
                        <div className="flex items-start gap-3">
                            <div className="flex items-center justify-center w-6 h-6 rounded-full bg-green-100 text-green-600 text-xs font-bold flex-shrink-0 mt-0.5">3</div>
                            <div>
                                <p className="text-sm font-medium text-gray-800 mb-1">Завершено</p>
                                <p className="text-xs text-gray-600">Данные обновлены, счётчик и дата последней синхронизации изменились</p>
                            </div>
                        </div>
                        
                        <div className="flex items-start gap-3">
                            <div className="flex items-center justify-center w-6 h-6 rounded-full bg-red-100 text-red-600 text-xs font-bold flex-shrink-0 mt-0.5">!</div>
                            <div>
                                <p className="text-sm font-medium text-gray-800 mb-1">Ошибка</p>
                                <p className="text-xs text-gray-600">Не удалось получить данные (нет прав, проблемы с API, токен устарел)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 className="!text-lg !font-semibold !text-gray-800 !mt-6 !mb-3">Когда запускать обновление</h3>

                <p>Частота синхронизации зависит от типа списка и ваших задач:</p>

                <ul>
                    <li><strong>Подписчики (История вступлений/выходов)</strong> — обновляются автоматически через Callback API, ручная синхронизация нужна только для первичной загрузки</li>
                    <li><strong>Активности (лайки, комментарии, репосты)</strong> — обновляются вручную каждые 2–4 часа, если вы отслеживаете реакцию на новый контент</li>
                    <li><strong>Посты</strong> — обновляются вручную раз в день или при добавлении нового контента</li>
                    <li><strong>Остальное</strong> — по необходимости, обычно раз в несколько дней</li>
                </ul>

                <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 my-6">
                    <div className="flex items-start gap-3">
                        <svg className="w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
                        </svg>
                        <div>
                            <h4 className="text-sm font-bold text-yellow-900 mb-1">Осторожно с частыми обновлениями</h4>
                            <p className="text-sm text-yellow-800 mb-0">
                                Слишком частая синхронизация больших списков (тысячи подписчиков, сотни постов) может привести к превышению лимитов VK API. Система автоматически контролирует скорость запросов, но лучше обновлять данные разумно: не каждые 5 минут, а раз в несколько часов.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            {/* ===================================================================== */}
            {/* НАВИГАЦИЯ */}
            {/* ===================================================================== */}
            <NavigationButtons currentPath="3-2-system-lists" />
        </div>
    );
};
