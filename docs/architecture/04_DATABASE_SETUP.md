# Настройка базы данных (SQLite)

Этот документ описывает, как создается и управляется база данных в новой архитектуре на Python/FastAPI.

## Процесс "Нулевой настройки" (Zero-Setup)

В отличие от старой системы, где требовалось вручную создавать и настраивать Google Sheet, новая архитектура использует подход "нулевой настройки". **Вам не нужно ничего делать вручную.**

### Как это работает:

1.  **Автоматическое создание файла БД**:
    -   При **первом запуске** Python-сервера (`uvicorn main:app --reload`), он проверяет наличие файла `vk_planner.db` в папке `backend_python`.
    -   Если файл отсутствует, он **создается автоматически**.

2.  **Автоматическое создание таблиц**:
    -   Сразу после создания файла, SQLAlchemy (ORM) читает все модели, определенные в `backend_python/models.py`.
    -   На основе этих моделей SQLAlchemy генерирует и выполняет SQL-команды `CREATE TABLE`, создавая все необходимые таблицы с правильными колонками и типами данных.

3.  **Автоматическое начальное заполнение (Seeding)**:
    -   После создания таблиц, код в `main.py` проверяет, пуста ли таблица `projects`.
    -   Если она пуста, скрипт автоматически добавляет в нее несколько **тестовых проектов**. Это позволяет начать работу с приложением сразу после первого запуска, без необходимости вручную добавлять данные.

4.  **Автоматические миграции**:
    -   При последующих запусках сервера, скрипт `migrations.py` может выполнять простые миграции, например, добавлять новые колонки, если они появились в моделях.

### Миграция с Google Sheets

Для переноса данных из старой Google-таблицы в новую базу данных SQLite предусмотрен отдельный скрипт:

-   **Файл**: `backend_python/migrate_from_csv.py`

**Процесс**:
1.  Экспортируйте лист `Projects` из вашей Google-таблицы в файл `projects.csv`.
2.  Поместите этот файл в папку `backend_python`.
3.  Запустите скрипт `python migrate_from_csv.py`.

Скрипт прочитает CSV-файл и добавит все проекты в базу данных `vk_planner.db`, пропуская те, которые уже существуют.
