# Предложенные посты (Suggested Posts)

**Компонент:** `features/suggested-posts/components/SuggestedPostsTab.tsx`
**Хук:** `features/suggested-posts/hooks/useSuggestedPostsManager.ts`

## 1. Загрузка данных

Хук `useSuggestedPosts` реализует "умную" стратегию загрузки:
1.  При первом рендере он берет данные из глобального кеша (`cachedPosts`), переданного через пропсы из `ProjectsContext`. Это обеспечивает мгновенное отображение.
2.  Если кеша нет (например, прямая ссылка или первый запуск), он инициирует загрузку (`fetchPosts`).
3.  Есть кнопка принудительного обновления, которая вызывает `api.refreshSuggestedPosts`.

## 2. Интерфейс (`SuggestedPostsLayout`)

Макет адаптивен к действиям пользователя:
*   **Список (Default):** Посты отображаются сеткой.
*   **Режим редактирования:** При выборе поста экран делится на две части:
    *   **Слева:** Карточка выбранного поста (`SuggestedPostCard`).
    *   **Справа:** Панель AI-редактора (`AiEditor`).

## 3. AI-Коррекция текста

Это ключевая фича модуля.

### Логика (`executeCorrection`)
1.  Пользователь нажимает "Редактор AI".
2.  Текст поста отправляется на бэкенд (`/api/ai/correctSuggestedPostText`).
3.  **Бэкенд:**
    *   Получает информацию о группе VK (для хештега).
    *   Находит переменную проекта `DLVRY` (ссылка на доставку).
    *   Формирует промпт для Gemini: "Исправь ошибки, добавь хештег #отзыв@..., добавь благодарность и ссылку".
4.  Результат возвращается и отображается в компоненте `AiEditor`.

### Взаимодействие
*   Пользователь видит результат работы AI.
*   Кнопка "Копировать" позволяет забрать исправленный текст в буфер обмена.
*   При повторном нажатии "Сгенерировать новый" (для того же поста) система спрашивает подтверждение, так как старый результат будет утерян.

## 4. Карточка (`SuggestedPostCard`)
*   **Галерея:** Если в посте есть изображения, они отображаются в виде горизонтальной ленты (`ImageRibbon`). Клик по фото открывает `ImagePreviewModal`.
*   **Ссылки:** Ссылка на автора и на сам пост в VK открываются в новой вкладке.