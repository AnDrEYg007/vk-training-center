# Компонент: Визуализация данных

## DiffViewer (Сравнение текста)

Компонент `DiffViewer` используется для наглядного отображения различий между двумя текстовыми строками. Он особенно полезен в сценариях, где AI предлагает исправления текста, и пользователю нужно четко видеть, что именно изменилось.

### 1. Назначение

-   Показывать пользователю "Было" и "Стало" в удобном формате.
-   Подсвечивать удаленные фрагменты красным, а добавленные — зеленым.
-   Используется в: `DescriptionCell` (при AI-коррекции описания), `BulkTitleEditModal`, `BulkDescriptionEditModal`.

### 2. Визуальный стиль

-   **Контейнер:** Блок с серой рамкой (`border-gray-300`) и белым фоном.
-   **Текст:** `text-sm`, сохраняет переносы строк (`whitespace-pre-wrap`).
-   **Удаления:** Красный фон (`bg-red-100`), красный текст (`text-red-800`), зачеркивание (`line-through`).
-   **Добавления:** Зеленый фон (`bg-green-100`), зеленый текст (`text-green-800`).

### 3. Реализация

Компонент использует алгоритм **LCS (Longest Common Subsequence)** для вычисления разницы на уровне слов.

```tsx
<DiffViewer 
    oldText="Старый текст с ошибкой" 
    newText="Новый текст без ошибки" 
/>
```

### 4. Примеры использования

#### В таблице (DescriptionCell)
Когда AI предлагает исправление описания товара, `DiffViewer` появляется под полем ввода, показывая предлагаемые изменения. Рядом располагаются кнопки "Применить" и "Отмена".

#### В модальных окнах (Bulk Edit)
При массовой AI-коррекции отображается таблица, где одна колонка содержит исходный текст (в `textarea`), а вторая — `DiffViewer` с результатом работы AI.