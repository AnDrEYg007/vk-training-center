# Компонент: Страница обучения (Training Page)

Этот документ описывает структуру, логику работы и принципы расширения раздела "Центр обучения".

---

## 1. Общая концепция и назначение

**"Центр обучения"** — это выделенный, полноэкранный раздел приложения, предназначенный для предоставления пользователям исчерпывающих руководств, инструкций и документации по работе с системой.

**Ключевые цели:**
-   Снизить порог вхождения для новых пользователей.
-   Предоставить быстрый доступ к ответам на часто задаваемые вопросы.
-   Продемонстрировать "неочевидные" механики и продвинутые возможности.
-   Создать легко расширяемую базу знаний, которая может расти вместе с приложением.

---

## 2. Структура макета (Layout)

Страница использует постоянный двухколоночный макет для удобной навигации и чтения.

-   **Левая колонка (Оглавление):**
    -   **Компонент:** `TableOfContents.tsx`.
    -   **Назначение:** Навигация по обучающим материалам.
    -   **Поведение:** Представляет собой фиксированный по ширине сайдбар (`w-80`), содержащий иерархическое, кликабельное меню. Содержимое сайдбара скроллится, если не помещается по высоте.

-   **Правая колонка (Контент):**
    -   **Компонент:** `TopicContent.tsx`.
    -   **Назначение:** Отображение содержимого выбранного раздела.
    -   **Поведение:** Занимает все оставшееся пространство (`flex-1`). Содержимое этой области скроллится вертикально.

---

## 3. Ключевые компоненты и поток данных

### `TrainingPage.tsx` (Корневой компонент)

-   **Роль:** "Дирижер" страницы.
-   **Логика:**
    -   Управляет единственным состоянием: `selectedTopic` (какой раздел выбран в оглавлении).
    -   Рендерит двухколоночный макет.
    -   Передает `selectedTopic` и функцию `setSelectedTopic` в дочерние компоненты.

### `data/tocData.ts` (Источник правды для структуры)

-   **Роль:** Определяет **всю** структуру и иерархию оглавления.
-   **Структура:** Экспортирует массив объектов типа `TocItem`, где каждый объект имеет:
    -   `title`: Текст, который видит пользователь.
    -   `path`: Уникальный строковый идентификатор (например, `2-4-3-postcard-deep-dive`).
    -   `children`: Опциональный массив дочерних `TocItem` для создания вложенности.
-   **Принцип расширения:** Чтобы добавить новый раздел или подраздел в оглавление, достаточно просто отредактировать этот файл.

### `TableOfContents.tsx` (Навигация)

-   **Роль:** Отображение интерактивного оглавления.
-   **Логика:**
    -   Использует рекурсивный дочерний компонент `TocNode` для отрисовки иерархической структуры из `tocData.ts`.
    -   При клике на элемент вызывает `onSelectTopic`, обновляя состояние в родительском `TrainingPage`.
    -   Визуально подсвечивает активный (выбранный) раздел.

### `TopicContent.tsx` (Отображение контента)

-   **Роль:** Динамически отображать нужный обучающий материал.
-   **Логика:**
    1.  Получает `selectedTopic` через props.
    2.  Если `selectedTopic` не выбран, отображает приветственное сообщение.
    3.  Использует **карту компонентов (`componentMap`)** — это JavaScript-объект, который сопоставляет `path` из `tocData.ts` с конкретным React-компонентом.
    4.  Если для текущего `path` находится соответствие в `componentMap`, рендерится этот компонент.
    5.  Если соответствие не найдено, рендерится компонент-заглушка `PlaceholderPage`, сообщающий, что материал находится в разработке.

---

## 4. Паттерны компоновки обучающих материалов (НОВОЕ)

Для создания наглядных и консистентных руководств необходимо следовать двум основным паттернам.

### 4.1. Принцип контекстуальности

**Правило:** Визуальные примеры должны быть максимально приближены к реальному интерфейсу. Вместо демонстрации изолированных, "выдранных" из контекста элементов, следует создавать **mock-контейнеры**, которые имитируют их естественное окружение.

-   **Пример:** Для демонстрации состояний элемента списка проектов (`ProjectListItem`) нужно создать mock-сайдбар, внутри которого будут расположены эти элементы.

### 4.2. Паттерны макета

#### а. "Split View" (Слева-направо)

-   **Назначение:** Идеально подходит для детального разбора сложных компонентов, их состояний и составных частей.
-   **Структура:** Двухколоночный макет.
    -   **Слева:** Визуальный или интерактивный пример компонента в его mock-окружении.
    -   **Справа:** Подробное текстовое описание каждого состояния или элемента, показанного в примере.
-   **Пример реализации:** Раздел "Сайдбар: Навигация" (`SidebarNavDeepDive.tsx`).

#### б. "Block View" (Сверху-вниз)

-   **Назначение:** Идеально подходит для интерактивных "песочниц" или для демонстрации простых, самодостаточных компонентов.
-   **Структура:** Блочный макет.
    -   **Сверху:** Интерактивный компонент-пример, часто в рамке "песочницы".
    -   **Снизу:** Текстовое описание того, что это за компонент и как с ним взаимодействовать.
-   **Пример реализации:** Интерактивные демо в разделе "Карточка поста: Детальный обзор" (`PostCardDeepDive.tsx`).

---

## 5. Как создать новый обучающий материал (Пошаговая инструкция)

Процесс добавления нового раздела в "Центр обучения" максимально упрощен и состоит из трех шагов:

### Шаг 1: Создать компонент контента

-   Создайте новый `.tsx` файл в папке `features/training/components/content/`.
-   В этом файле создайте React-компонент, который будет содержать ваш обучающий материал (текст, mock-компоненты, "песочницы"), следуя утвержденным паттернам компоновки. Используйте классы `prose` для красивой типографики.

### Шаг 2: Добавить раздел в оглавление

-   Откройте файл `features/training/data/tocData.ts`.
-   Добавьте новый объект в массив `toc`, определив для него:
    -   `title`: Название, которое увидят пользователи.
    -   `path`: **Уникальный идентификатор** (например, `my-new-cool-guide`).
    -   При необходимости, вложите его в `children` существующего раздела.

### Шаг 3: Зарегистрировать компонент для отображения

-   Откройте файл `features/training/components/TopicContent.tsx`.
-   Импортируйте ваш новый компонент контента, созданный на Шаге 1.
-   Добавьте новую запись в объект `componentMap`, связав `path` из Шага 2 с импортированным компонентом.

**Пример:**
```typescript
// В TopicContent.tsx

import { MyNewGuideComponent } from './content/MyNewGuideComponent'; // 1. Импорт

const componentMap: Record<string, React.FC<{ title: string }>> = {
    '2-4-3-postcard-deep-dive': PostCardDeepDive,
    'my-new-cool-guide': MyNewGuideComponent, // 2. Регистрация в карте
};
```
После этих трех шагов ваш новый обучающий материал появится в оглавлении и будет корректно отображаться при выборе.